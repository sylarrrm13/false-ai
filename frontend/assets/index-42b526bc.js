import{d as N,b7 as T,bp as z,aH as A,u as F,ab as P,l as v,r as w,bq as B,o as C,c as $,a as o,aR as R,av as e,aC as i,b as a,aw as s,aO as _,aB as S,aG as x,br as U,aE as j,aI as E,ac as I,aK as J,bs as M,bt as H,aL as V,aS as q}from"./index-2ff0771d.js";function K(){const r=new Date,l=r.getDate(),p=r.getMonth()+1;return`${r.getFullYear()}-${p}-${l}`}const Y={class:"p-4 space-y-5 min-h-[200px]"},Q={class:"space-y-6"},W={class:"flex-shrink-0 w-[100px]"},X={class:"flex flex-wrap items-center gap-4"},Z={class:"flex items-center space-x-4"},ee={class:"flex-shrink-0 w-[100px]"},te={class:"flex flex-wrap items-center gap-4"},ae=N({__name:"General",setup(r){const l=T(),p=z();A();const{isMobile:b}=F(),m=P(),f=v(()=>l.theme),h=v(()=>p.userInfo);w(h.value.name??"");const c=B();w(c.token),v({get(){return l.language},set(t){l.setLanguage(t)}});const g=[{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}];function D(){const t=K(),u=localStorage.getItem("chatStorage")||"{}",n=JSON.stringify(JSON.parse(u),null,2),d=new Blob([n],{type:"application/json"}),k=URL.createObjectURL(d),y=document.createElement("a");y.href=k,y.download=`chat-store_${t}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y)}function L(t){const u=t.target;if(!u||!u.files)return;const n=u.files[0];if(!n)return;const d=new FileReader;d.onload=()=>{try{const k=JSON.parse(d.result);localStorage.setItem("chatStorage",JSON.stringify(k)),m.success(I("common.success")),location.reload()}catch{m.error(I("common.invalidFileFormat"))}},d.readAsText(n)}function O(){localStorage.removeItem("chatStorage"),location.reload()}function G(){const t=document.getElementById("fileInput");t&&t.click()}return(t,u)=>(C(),$("div",Y,[o("div",Q,[o("div",{class:R(["flex items-center space-x-4",e(b)&&"items-start"])},[o("span",W,i(t.$t("setting.chatHistory")),1),o("div",X,[a(e(x),{size:"small",onClick:D},{icon:s(()=>[a(e(_),{icon:"ri:download-2-fill"})]),default:s(()=>[S(" "+i(t.$t("common.export")),1)]),_:1}),o("input",{id:"fileInput",type:"file",style:{display:"none"},onChange:L},null,32),a(e(x),{size:"small",onClick:G},{icon:s(()=>[a(e(_),{icon:"ri:upload-2-fill"})]),default:s(()=>[S(" "+i(t.$t("common.import")),1)]),_:1}),a(e(U),{placement:"bottom",onPositiveClick:O},{trigger:s(()=>[a(e(x),{size:"small"},{icon:s(()=>[a(e(_),{icon:"ri:close-circle-line"})]),default:s(()=>[S(" "+i(t.$t("common.clear")),1)]),_:1})]),default:s(()=>[S(" "+i(t.$t("chat.clearHistoryConfirm")),1)]),_:1})])],2),o("div",Z,[o("span",ee,i(t.$t("setting.theme")),1),o("div",te,[(C(),$(j,null,E(g,n=>a(e(x),{key:n.key,size:"small",type:n.key===e(f)?"primary":void 0,onClick:d=>e(l).setTheme(n.key)},{icon:s(()=>[a(e(_),{icon:n.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])])])]))}}),se={class:"ml-2"},oe={class:"min-h-[100px]"},le=N({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(r,{emit:l}){const p=r,b=B();v(()=>!!b.isChatGPTAPI);const m=w("General"),f=v({get(){return p.visible},set(h){l("update:visible",h)}});return(h,c)=>(C(),J(e(q),{show:e(f),"onUpdate:show":c[1]||(c[1]=g=>V(f)?f.value=g:null),"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:s(()=>[o("div",null,[a(e(M),{value:m.value,"onUpdate:value":c[0]||(c[0]=g=>m.value=g),type:"line",animated:""},{default:s(()=>[a(e(H),{name:"General",tab:"General"},{tab:s(()=>[a(e(_),{class:"text-lg",icon:"ri:file-user-line"}),o("span",se,i(h.$t("setting.general")),1)]),default:s(()=>[o("div",oe,[a(ae)])]),_:1})]),_:1},8,["value"])])]),_:1},8,["show"]))}});export{le as default};
