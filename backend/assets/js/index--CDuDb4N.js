import{d as j,i as b,$ as le,L as F,C as H,r,o as V,c as x,b as e,w as l,F as ae,a as s,A as q,y as K,k as P,v as Y,h as G,E as I,p as N,g as Q,a0 as J,a1 as O,a2 as W,z as te,a3 as ie,u as oe,Y as se,e as n}from"./index-mkXm0lbT.js";import{u as X}from"./upload-hbbC0aqT.js";import{_ as Z}from"./_plugin-vue_export-helper-x3n3nnut.js";const A=m=>(N("data-v-0fe19d29"),m=m(),Q(),m),de={class:"upload-box"},ne=["src"],ue=A(()=>s("span",null,"编辑",-1)),re=A(()=>s("span",null,"查看",-1)),pe=A(()=>s("span",null,"删除",-1)),me={key:1,class:"upload-empty"},ce={class:"el-upload__tip"},fe=j({name:"UploadImg"}),_e=j({...fe,props:{imageUrl:{default:""},api:{},drag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},fileSize:{default:5},fileType:{default:()=>["image/jpeg","image/png","image/gif"]},height:{default:"150px"},width:{default:"150px"},borderRadius:{default:"8px"}},emits:["update:imageUrl"],setup(m,{emit:M}){J(o=>({"10fcd1c8":o.width,"423b5ade":o.height,"6156f470":o.borderRadius}));const p=m,y=b("id-"+le()),U=b(!1),h=F(O,void 0),g=F(W,void 0),C=H(()=>p.disabled||(h==null?void 0:h.disabled)),E=M,c=async o=>{let u=new FormData;u.append("file",o.file);try{const a=p.api??X,{data:d}=await a(u);E("update:imageUrl",d.fileUrl),g!=null&&g.prop&&(h==null||h.validateField([g.prop]))}catch(a){o.onError(a)}},v=()=>{E("update:imageUrl","")},R=()=>{const o=document.querySelector(`#${y.value} .el-upload__input`);o&&o.dispatchEvent(new MouseEvent("click"))},T=o=>{const u=o.size/1024/1024<p.fileSize,a=p.fileType.includes(o.type);return a||I({title:"温馨提示",message:"上传图片不符合所需的格式！",type:"warning"}),u||setTimeout(()=>{I({title:"温馨提示",message:`上传图片大小不能超过 ${p.fileSize}M！`,type:"warning"})},0),a&&u},B=()=>{I({title:"温馨提示",message:"图片上传成功！",type:"success"})},t=()=>{I({title:"温馨提示",message:"图片上传失败，请您重新上传！",type:"error"})};return(o,u)=>{const a=r("Edit"),d=r("el-icon"),f=r("ZoomIn"),S=r("Delete"),_=r("Plus"),$=r("el-upload"),L=r("el-image-viewer");return V(),x("div",de,[e($,{id:y.value,action:"#",class:Y(["upload",C.value?"disabled":"",o.drag?"no-border":""]),multiple:!1,disabled:C.value,"show-file-list":!1,"http-request":c,"before-upload":T,"on-success":B,"on-error":t,drag:o.drag,accept:o.fileType.join(",")},{default:l(()=>[o.imageUrl?(V(),x(ae,{key:0},[s("img",{src:o.imageUrl,class:"upload-image"},null,8,ne),s("div",{class:"upload-handle",onClick:u[1]||(u[1]=K(()=>{},["stop"]))},[C.value?q("",!0):(V(),x("div",{key:0,class:"handle-icon",onClick:R},[e(d,null,{default:l(()=>[e(a)]),_:1}),ue])),s("div",{class:"handle-icon",onClick:u[0]||(u[0]=w=>U.value=!0)},[e(d,null,{default:l(()=>[e(f)]),_:1}),re]),C.value?q("",!0):(V(),x("div",{key:1,class:"handle-icon",onClick:v},[e(d,null,{default:l(()=>[e(S)]),_:1}),pe]))])],64)):(V(),x("div",me,[P(o.$slots,"empty",{},()=>[e(d,null,{default:l(()=>[e(_)]),_:1})],!0)]))]),_:3},8,["id","class","disabled","drag","accept"]),s("div",ce,[P(o.$slots,"tip",{},void 0,!0)]),U.value?(V(),G(L,{key:0,"url-list":[o.imageUrl],onClose:u[2]||(u[2]=w=>U.value=!1)},null,8,["url-list"])):q("",!0)])}}}),z=Z(_e,[["__scopeId","data-v-0fe19d29"]]),ee=m=>(N("data-v-974aeb38"),m=m(),Q(),m),ge={class:"upload-box"},ve={class:"upload-empty"},be=["src"],he=["onClick"],ye=ee(()=>s("span",null,"查看",-1)),Ue=["onClick"],we=ee(()=>s("span",null,"删除",-1)),$e={class:"el-upload__tip"},Ve=j({name:"UploadImgs"}),ke=j({...Ve,props:{fileList:{default:()=>[]},api:{},drag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},limit:{default:5},fileSize:{default:5},fileType:{default:()=>["image/jpeg","image/png","image/gif"]},height:{default:"150px"},width:{default:"150px"},borderRadius:{default:"8px"}},emits:["update:fileList"],setup(m,{emit:M}){J(a=>({"933ef43e":a.borderRadius,"1db09123":a.width,"7e92996a":a.height}));const p=m,y=F(O,void 0),U=F(W,void 0),h=H(()=>p.disabled||(y==null?void 0:y.disabled)),g=b(p.fileList);te(()=>p.fileList,a=>{g.value=a});const C=a=>{const d=a.size/1024/1024<p.fileSize,f=p.fileType.includes(a.type);return f||I({title:"温馨提示",message:"上传图片不符合所需的格式！",type:"warning"}),d||setTimeout(()=>{I({title:"温馨提示",message:`上传图片大小不能超过 ${p.fileSize}M！`,type:"warning"})},0),f&&d},E=async a=>{let d=new FormData;d.append("file",a.file);try{const f=p.api??X,{data:S}=await f(d);a.onSuccess(S)}catch(f){a.onError(f)}},c=M,v=(a,d)=>{a&&(d.url=a.fileUrl,c("update:fileList",g.value),U!=null&&U.prop&&(y==null||y.validateField([U.prop])),I({title:"温馨提示",message:"图片上传成功！",type:"success"}))},R=a=>{g.value=g.value.filter(d=>d.url!==a.url||d.name!==a.name),c("update:fileList",g.value)},T=()=>{I({title:"温馨提示",message:"图片上传失败，请您重新上传！",type:"error"})},B=()=>{I({title:"温馨提示",message:`当前最多只能上传 ${p.limit} 张图片，请移除后上传！`,type:"warning"})},t=b(""),o=b(!1),u=a=>{t.value=a.url,o.value=!0};return(a,d)=>{const f=r("el-icon"),S=r("ZoomIn"),_=r("Delete"),$=r("el-upload"),L=r("el-image-viewer");return V(),x("div",ge,[e($,{"file-list":g.value,"onUpdate:fileList":d[1]||(d[1]=w=>g.value=w),action:"#","list-type":"picture-card",class:Y(["upload",h.value?"disabled":"",a.drag?"no-border":""]),multiple:!0,disabled:h.value,limit:a.limit,"http-request":E,"before-upload":C,"on-exceed":B,"on-success":v,"on-error":T,drag:a.drag,accept:a.fileType.join(",")},{file:l(({file:w})=>[s("img",{src:w.url,class:"upload-image"},null,8,be),s("div",{class:"upload-handle",onClick:d[0]||(d[0]=K(()=>{},["stop"]))},[s("div",{class:"handle-icon",onClick:i=>u(w)},[e(f,null,{default:l(()=>[e(S)]),_:1}),ye],8,he),h.value?q("",!0):(V(),x("div",{key:0,class:"handle-icon",onClick:i=>R(w)},[e(f,null,{default:l(()=>[e(_)]),_:1}),we],8,Ue))])]),default:l(()=>[s("div",ve,[P(a.$slots,"empty",{},()=>[e(f,null,{default:l(()=>[e(oe(ie))]),_:1})],!0)])]),_:3},8,["file-list","class","disabled","limit","drag","accept"]),s("div",$e,[P(a.$slots,"tip",{},void 0,!0)]),o.value?(V(),G(L,{key:0,"url-list":[t.value],onClose:d[2]||(d[2]=w=>o.value=!1)},null,8,["url-list"])):q("",!0)])}}}),D=Z(ke,[["__scopeId","data-v-974aeb38"]]),k=m=>(N("data-v-8321fd34"),m=m(),Q(),m),Ce={class:"upload content-box"},Ie={class:"card img-box"},Se=k(()=>s("span",{class:"text"},"多图片上传组件 🍓🍇🍈🍉",-1)),Le={class:"upload-list"},xe=k(()=>s("span",null,"请上传照片",-1)),ze=k(()=>s("span",null,"请上传照片",-1)),Me={class:"card img-box"},Ee=k(()=>s("span",{class:"text"},"单图片上传组件 🍓🍇🍈🍉",-1)),Re={class:"upload-list"},Te=k(()=>s("span",null,"请上传头像",-1)),je=k(()=>s("span",null,"请上传 Banner 图",-1)),Be={class:"form-box"},qe={class:"card"},De=k(()=>s("span",null,"请上传头像",-1)),Fe=k(()=>s("span",null,"请上传照片",-1)),Pe={class:"card"},Ne=k(()=>s("span",null,"请上传头像",-1)),Qe=k(()=>s("span",null,"请上传照片",-1)),Ze=j({name:"uploadFile"}),Ae=j({...Ze,setup(m){const M=b([{name:"img",url:"https://i.imgtg.com/2023/01/16/QRBHS.jpg"}]),p=b([]),y=b(""),U=b(""),h=b(""),g=b(""),C=b("https://i.imgtg.com/2023/01/16/QRqMK.jpg"),E=se({avatar:[{required:!0,message:"请上传用户头像"}],photo:[{required:!0,message:"请上传用户照片"}],username:[{required:!0,message:"请填写用户姓名"}],idCard:[{required:!0,message:"请填写身份证号"}],email:[{required:!0,message:"请填写邮箱"}]}),c=b({avatar:"",photo:[{name:"img",url:"https://i.imgtg.com/2023/01/16/QR57a.jpg"}],username:"",idCard:"",email:""}),v=b({avatar:"",photo:[{name:"img",url:"https://i.imgtg.com/2023/01/16/QR57a.jpg"}],username:"",idCard:"",email:""}),R=b(),T=()=>{R.value.validate(B=>{})};return(B,t)=>{const o=r("Picture"),u=r("el-icon"),a=r("el-descriptions-item"),d=r("el-descriptions"),f=r("Avatar"),S=r("el-alert"),_=r("el-form-item"),$=r("el-input"),L=r("el-button"),w=r("el-form");return V(),x("div",Ce,[s("div",Ie,[Se,s("div",Le,[e(D,{"file-list":M.value,"onUpdate:fileList":t[0]||(t[0]=i=>M.value=i),drag:!1,"border-radius":"50%"},{empty:l(()=>[e(u,null,{default:l(()=>[e(o)]),_:1}),xe]),tip:l(()=>[n(" 圆形组件，图片最大为 5M（禁止拖拽上传） ")]),_:1},8,["file-list"]),e(D,{"file-list":p.value,"onUpdate:fileList":t[1]||(t[1]=i=>p.value=i),width:"250px"},{empty:l(()=>[e(u,null,{default:l(()=>[e(o)]),_:1}),ze]),tip:l(()=>[n(" 长方形组件（可拖拽上传） ")]),_:1},8,["file-list"])]),e(d,{title:"配置项 📚（其它参数和单图上传组件相同）",column:1,border:""},{default:l(()=>[e(a,{label:"fileList"},{default:l(()=>[n(' 双向绑定的 fileList 值，使用示例： v-model:file-list="fileList" ')]),_:1}),e(a,{label:"limit"},{default:l(()=>[n(" 最大图片上传数，默认为 5 张 ")]),_:1})]),_:1})]),s("div",Me,[Ee,s("div",Re,[e(z,{"image-url":y.value,"onUpdate:imageUrl":t[2]||(t[2]=i=>y.value=i),"file-size":3},{tip:l(()=>[n(" 上传图片最大为 3M ")]),_:1},8,["image-url"]),e(z,{"image-url":U.value,"onUpdate:imageUrl":t[3]||(t[3]=i=>U.value=i),drag:!1,"border-radius":"50%"},{empty:l(()=>[e(u,null,{default:l(()=>[e(f)]),_:1}),Te]),tip:l(()=>[n(" 圆形组件（禁止拖拽上传） ")]),_:1},8,["image-url"]),e(z,{"image-url":h.value,"onUpdate:imageUrl":t[4]||(t[4]=i=>h.value=i),width:"250px"},{empty:l(()=>[e(u,null,{default:l(()=>[e(o)]),_:1}),je]),tip:l(()=>[n(" 长方形组件（可拖拽上传） ")]),_:1},8,["image-url"]),e(z,{"image-url":g.value,"onUpdate:imageUrl":t[5]||(t[5]=i=>g.value=i),disabled:""},{tip:l(()=>[n(" 无图（禁用上传） ")]),_:1},8,["image-url"]),e(z,{"image-url":C.value,"onUpdate:imageUrl":t[6]||(t[6]=i=>C.value=i),disabled:""},{tip:l(()=>[n(" 有图（禁用编辑、删除） ")]),_:1},8,["image-url"])]),e(d,{title:"配置项 📚",column:1,border:""},{default:l(()=>[e(a,{label:"imageUrl"},{default:l(()=>[n(' 双向绑定的 imageUrl 值，使用示例： v-model:image-url="avatar" ')]),_:1}),e(a,{label:"api"},{default:l(()=>[n(" 上传图片的 api 方法，一般项目上传都是同一个 api 方法，在组件里直接引入即可（非必传） ")]),_:1}),e(a,{label:"drag"},{default:l(()=>[n(" 是否支持拖拽上传图片，默认为 true ")]),_:1}),e(a,{label:"disabled"},{default:l(()=>[n(" 是否禁用 上传、删除 功能，可查看图片 ")]),_:1}),e(a,{label:"fileSize"},{default:l(()=>[n(" 单个图片文件大小限制，默认为 5M ")]),_:1}),e(a,{label:"fileType"},{default:l(()=>[n(' 图片类型限制，默认类型为 ["image/jpeg", "image/png", "image/gif"] ')]),_:1}),e(a,{label:"height"},{default:l(()=>[n(' 组件高度样式，默认为 "150px" ')]),_:1}),e(a,{label:"width"},{default:l(()=>[n(' 组件宽度样式，默认为 "150px" ')]),_:1}),e(a,{label:"borderRadius"},{default:l(()=>[n(' 组件边框圆角样式，默认为 "8px" ')]),_:1})]),_:1})]),s("div",Be,[s("div",qe,[e(S,{title:"图片上传组件在 form 表单中使用，上传之后成功会自动重新校验",type:"warning",effect:"dark",closable:!1,class:"mb20"}),e(w,{ref_key:"ruleFormRef",ref:R,"label-width":"100px","label-suffix":" :",rules:E,model:c.value},{default:l(()=>[e(_,{label:"用户头像",prop:"avatar"},{default:l(()=>[e(z,{"image-url":c.value.avatar,"onUpdate:imageUrl":t[7]||(t[7]=i=>c.value.avatar=i),width:"135px",height:"135px","file-size":3},{empty:l(()=>[e(u,null,{default:l(()=>[e(f)]),_:1}),De]),tip:l(()=>[n(" 头像大小不能超过 3M ")]),_:1},8,["image-url"])]),_:1}),e(_,{label:"用户照片",prop:"photo"},{default:l(()=>[e(D,{"file-list":c.value.photo,"onUpdate:fileList":t[8]||(t[8]=i=>c.value.photo=i),limit:3,height:"140px",width:"140px","border-radius":"50%"},{empty:l(()=>[e(u,null,{default:l(()=>[e(o)]),_:1}),Fe]),tip:l(()=>[n(" 最多上传 3 张照片 ")]),_:1},8,["file-list"])]),_:1}),e(_,{label:"用户姓名",prop:"username"},{default:l(()=>[e($,{modelValue:c.value.username,"onUpdate:modelValue":t[9]||(t[9]=i=>c.value.username=i),placeholder:"请填写用户姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(_,{label:"身份证号",prop:"idCard"},{default:l(()=>[e($,{modelValue:c.value.idCard,"onUpdate:modelValue":t[10]||(t[10]=i=>c.value.idCard=i),placeholder:"请填写身份证号",clearable:""},null,8,["modelValue"])]),_:1}),e(_,{label:"邮箱",prop:"email"},{default:l(()=>[e($,{modelValue:c.value.email,"onUpdate:modelValue":t[11]||(t[11]=i=>c.value.email=i),placeholder:"请填写邮箱",clearable:""},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(L,null,{default:l(()=>[n(" 取消 ")]),_:1}),e(L,{type:"primary",onClick:T},{default:l(()=>[n(" 确定 ")]),_:1})]),_:1})]),_:1},8,["rules","model"])]),s("div",Pe,[e(S,{title:"图片上传组件在 form 表单中使用，如果该表单禁用，则上传组件会自动禁用",type:"warning",effect:"dark",closable:!1,class:"mb20"}),e(w,{"label-width":"100px","label-suffix":" :",disabled:"",model:v.value},{default:l(()=>[e(_,{label:"用户头像",prop:"avatar"},{default:l(()=>[e(z,{"image-url":v.value.avatar,"onUpdate:imageUrl":t[12]||(t[12]=i=>v.value.avatar=i),width:"135px",height:"135px","file-size":3},{empty:l(()=>[e(u,null,{default:l(()=>[e(f)]),_:1}),Ne]),tip:l(()=>[n(" 头像大小不能超过 3M ")]),_:1},8,["image-url"])]),_:1}),e(_,{label:"用户照片",prop:"photo"},{default:l(()=>[e(D,{"file-list":v.value.photo,"onUpdate:fileList":t[13]||(t[13]=i=>v.value.photo=i),height:"140px",width:"140px","border-radius":"50%"},{empty:l(()=>[e(u,null,{default:l(()=>[e(o)]),_:1}),Qe]),tip:l(()=>[n(" 照片大小不能超过 5M ")]),_:1},8,["file-list"])]),_:1}),e(_,{label:"用户姓名",prop:"username"},{default:l(()=>[e($,{modelValue:v.value.username,"onUpdate:modelValue":t[14]||(t[14]=i=>v.value.username=i),placeholder:"请填写用户姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(_,{label:"身份证号",prop:"idCard"},{default:l(()=>[e($,{modelValue:v.value.idCard,"onUpdate:modelValue":t[15]||(t[15]=i=>v.value.idCard=i),placeholder:"请填写身份证号",clearable:""},null,8,["modelValue"])]),_:1}),e(_,{label:"邮箱",prop:"email"},{default:l(()=>[e($,{modelValue:v.value.email,"onUpdate:modelValue":t[16]||(t[16]=i=>v.value.email=i),placeholder:"请填写邮箱",clearable:""},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(L,null,{default:l(()=>[n(" 取消 ")]),_:1}),e(L,{type:"primary",onClick:T},{default:l(()=>[n(" 确定 ")]),_:1})]),_:1})]),_:1},8,["model"])])])])}}}),Ge=Z(Ae,[["__scopeId","data-v-8321fd34"]]);export{Ge as default};
