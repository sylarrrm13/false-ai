import{g as T}from"./user-aI17CSzd.js";import{d as h,i as f,V as O,z as y,r as _,o as V,c as C,t as q,A as R,b as l,w as d,u as I,W as U,a as w,k as J,X as K,S as P,e as o,Y as A,T as F,p as W,g as X}from"./index-mkXm0lbT.js";import{_ as B}from"./_plugin-vue_export-helper-x3n3nnut.js";const Y={class:"card filter"},j={key:0,class:"title sle"},G={class:"el-tree-node__label"},H=h({name:"TreeFilter"}),L=h({...H,props:{requestApi:{},data:{},title:{},id:{default:"id"},label:{default:"label"},multiple:{type:Boolean,default:!1},defaultValue:{}},emits:["change"],setup(r,{expose:m,emit:b}){const t=r,k={children:"children",label:t.label},s=f(),c=f([]),a=f([]),i=f(),x=()=>{t.multiple?i.value=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue]:i.value=typeof t.defaultValue=="string"?t.defaultValue:""};O(async()=>{if(x(),t.requestApi){const{data:e}=await t.requestApi();c.value=e,a.value=[{id:"",[t.label]:"全部"},...e]}}),y(()=>t.defaultValue,()=>P(()=>x()),{deep:!0,immediate:!0}),y(()=>t.data,()=>{var e;(e=t.data)!=null&&e.length&&(c.value=t.data,a.value=[{id:"",[t.label]:"全部"},...t.data])},{deep:!0,immediate:!0});const v=f("");y(v,e=>{s.value.filter(e)});const D=(e,g,u)=>{if(!e)return!0;let p=u.parent,n=[u.label],S=1;for(;S<u.level;)n=[...n,p.label],p=p.parent,S++;return n.some(M=>M.indexOf(e)!==-1)},N=b,E=e=>{t.multiple||N("change",e[t.id])},z=()=>{var e;N("change",(e=s.value)==null?void 0:e.getCheckedKeys())};return m({treeData:c,treeAllData:a,treeRef:s}),(e,g)=>{const u=_("el-input"),p=_("el-scrollbar");return V(),C("div",Y,[e.title?(V(),C("h4",j,q(e.title),1)):R("",!0),l(u,{modelValue:v.value,"onUpdate:modelValue":g[0]||(g[0]=n=>v.value=n),placeholder:"输入关键字进行过滤",clearable:""},null,8,["modelValue"]),l(p,{style:K({height:e.title?"calc(100% - 95px)":"calc(100% - 56px)"})},{default:d(()=>[l(I(U),{ref_key:"treeRef",ref:s,"default-expand-all":"","node-key":e.id,data:e.multiple?c.value:a.value,"show-checkbox":e.multiple,"check-strictly":!1,"current-node-key":e.multiple?"":i.value,"highlight-current":!e.multiple,"expand-on-click-node":!1,"check-on-click-node":e.multiple,props:k,"filter-node-method":D,"default-checked-keys":e.multiple?i.value:[],onNodeClick:E,onCheck:z},{default:d(n=>[w("span",G,[J(e.$slots,"default",{row:n},()=>[o(q(n.node.label),1)],!0)])]),_:3},8,["node-key","data","show-checkbox","current-node-key","highlight-current","check-on-click-node","default-checked-keys"])]),_:3},8,["style"])])}}}),$=B(L,[["__scopeId","data-v-05af00f0"]]),Q=r=>(W("data-v-b2b5dc6d"),r=r(),X(),r),Z={class:"content-box"},ee={class:"descriptions-box card"},te=Q(()=>w("span",{class:"text"}," 树形筛选器 🍓🍇🍈🍉",-1)),le=h({name:"treeFilter"}),ae=h({...le,setup(r){const m=A({departmentId:"1"}),b=s=>{F.success(`你选择了 id 为 ${s} 的数据🤔`),m.departmentId=s},t=A({departmentId:["11"]}),k=s=>{F.success(`你选择了 id 为 ${JSON.stringify(s)} 的数据🤔`),t.departmentId=s};return(s,c)=>{const a=_("el-descriptions-item"),i=_("el-descriptions");return V(),C("div",Z,[l($,{label:"name",title:"部门列表(单选)","request-api":I(T),"default-value":m.departmentId,onChange:b},null,8,["request-api","default-value"]),l($,{title:"部门列表(多选)",multiple:"",label:"name","request-api":I(T),"default-value":t.departmentId,onChange:k},null,8,["request-api","default-value"]),w("div",ee,[te,l(i,{title:"配置项 📚",column:1,border:""},{default:d(()=>[l(a,{label:"requestApi"},{default:d(()=>[o(" 请求分类数据的 api ")]),_:1}),l(a,{label:"data"},{default:d(()=>[o(" 分类数据，如果有分类数据，则不会执行 api 请求 ")]),_:1}),l(a,{label:"title"},{default:d(()=>[o(" treeFilter 标题 ")]),_:1}),l(a,{label:"id"},{default:d(()=>[o(" 选择的id，默认为 “id” ")]),_:1}),l(a,{label:"label"},{default:d(()=>[o(" 显示的label，默认为 “label” ")]),_:1}),l(a,{label:"multiple"},{default:d(()=>[o(" 是否为多选，默认为 false ")]),_:1}),l(a,{label:"defaultValue"},{default:d(()=>[o(" 默认选中的值 ")]),_:1})]),_:1})])])}}}),oe=B(ae,[["__scopeId","data-v-b2b5dc6d"]]);export{oe as default};
